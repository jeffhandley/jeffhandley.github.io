---
layout: post
title: "Async Validation with .NET RIA Services and DataForm"
date: 2009-07-11 12:05:08 -0700
comments: true
category: Archive
tags: []
redirect_from: ["http://jeffhandley.github.io/archive/2009/07/11/asyncvalidation.aspx"]
author: 0
---
<!-- more -->
<h4><em>Please note… this post is out-dated and all of the madness below is no longer needed in order to implement Async Validation with RIA Services.  Please see the <a href="http://jeffhandley.com/archive/2010/05/26/asyncvalidation-again.aspx">new post for the current approach</a>.</em></h4>
<h4>The Birth of QuickSilverlight.Validation</h4>
<p>Over on the <a title="SilverlightRIA asks how to integrate async validation with the DataForm" target="_blank" href="http://silverlight.net/forums/p/104753/243701.aspx#243701">.NET RIA Services forums</a>, “SilverlightRIA” asked about performing asynchronous validation with <a target="_blank" href="http://code.msdn.microsoft.com/RiaServices">.NET RIA Services</a> and the <a target="_blank" href="http://www.codeplex.com/Silverlight">Silverlight Toolkit</a>’s DataForm.  He wanted to intercept the Commit from the DataForm and invoke his async validation, integrating the results into the DataForm’s validation UI.  This was an interesting scenario so I put some time into a solution for it this week.  The result is a library that I’m calling QuickSilverlight.Validation.</p>
<h4>Integrating Validation Results into DataForm</h4>
<p>It took a few hours of digging to find a way to get the async validation results to integrate into the DataForm’s UI.  Here’s what DataForm does when you commit edits:</p>
<ol>
    <li>Loop through all of the fields, calling UpdateSource on each field’s binding.  This will call the setters for all properties, which triggers validation. </li>
    <li>If validation fails on the property, the field is highlighted, an item is added to the validation summary, and clicking that summary item will put focus into the affected field. </li>
    <li>If validation succeeds on all of the properties, then entity-level validation is invoked. </li>
    <li>If entity-level validation succeeds, then the entity is committed. </li>
</ol>
<p>To integrate async validation results into the DataForm, it was imperative to have the property-level validators fail validation, producing the messages retrieved from the async validation.  Here was my starting idea for how to get this going:</p>
<ol>
    <li>Apply an [AsyncValidation] attribute to the properties that can have async validation results applied to them. </li>
    <li>Make the AsyncValidation attribute return a ValidationResult that comes from an async validation execution. </li>
</ol>
<p>The trick of course is to fetch the async validation results before the properties are validated through DataForm.  Here’s how I pulled that off:</p>
<ol>
    <li>Handle the DataForm.EditEnding event, which is raised before validation occurs. </li>
    <li>Within that event handler, call DataForm.ValidateItem() to see if the item is valid with respect to its client-side, synchronous validators.  Make the AsyncValidation attributes return Success at that stage. </li>
    <li>If valid, initiate the call to get async validation results, and cancel the EditEnding event using CancelEventArgs.Cancel = true. </li>
    <li>This prevents DataForm from progressing on to actually commit the edit. </li>
    <li>When async validation completes, store the results for access by the AsyncValidation attributes. </li>
    <li>Call DataForm.CommitEdit(), triggering the whole process to start over. </li>
    <li>Within the DataForm.EditEnding event handler, recognize that async validation result processing is in process, and don’t do anything to change the DataForm’s behavior.  Let it validate the properties and object as it normally would, committing the entity if everything is valid. </li>
    <li>At this stage, make the AsyncValidation attributes respect the async validation results, generating validation errors as appropriate. </li>
    <li>When this is finished, clear any stored async validation results for the entity, so that the next time it’s validated, our async validation results won’t interfere with client-side synchronous validation. </li>
</ol>
<p>Yep; that was a mouthful.  But I have two flavors of good news.  First, I am going to make the source code for all of this available.  Second, I’ve packaged the code up into a library that allows you to get all of this behavior for next to nothing.  We’re actually not yet finished though, as there were a few more details to work out to finish the end-to-end solution.</p>
<h4>.NET RIA Services Integration</h4>
<p>With .NET RIA Services, we want to apply the [AsyncValidation] attribute to the entities on the server, and have that metadata flow through to the client.  We also want the same validation to execute on the server, but synchronously.  Let’s first look at executing the validation on the server.</p>
<p>.NET RIA Services includes an updated System.ComponentModel.DataAnnotations assembly.  One of the new features in that assembly with the July 2009 Preview is an interface called IValidatableObject.  This interface only applies to the desktop version of this assembly—it’s not included in the Silverlight subset of the assembly.  Here’s the definition of the interface:</p>
<div style="BORDER-BOTTOM: gray 1px solid; BORDER-LEFT: gray 1px solid; PADDING-BOTTOM: 4px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 20px 0px 10px; PADDING-LEFT: 4px; WIDTH: 97.5%; PADDING-RIGHT: 4px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; MAX-HEIGHT: 2000px; FONT-SIZE: 8pt; OVERFLOW: auto; BORDER-TOP: gray 1px solid; CURSOR: text; BORDER-RIGHT: gray 1px solid; PADDING-TOP: 4px">
<div style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px">
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   1:</span> <span style="COLOR: #0000ff">namespace</span> System.ComponentModel.DataAnnotations</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   2:</span> {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   3:</span>     <span style="COLOR: #0000ff">public</span> <span style="COLOR: #0000ff">interface</span> IValidatableObject</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   4:</span>     {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   5:</span>         IEnumerable&lt;ValidationResult&gt; Validate(ValidationContext validationContext);</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   6:</span>     }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   7:</span> }</pre>
</div>
</div>
<p><br />
The great part about this interface is that it allows not just a single ValidationResult, but an IEnumerable&lt;ValidationResult&gt; to be returned from the Validate method.  .NET RIA Services respects this interface when it performs server-side validation of your entities, so all we need to do is implement this interface on our entity, and collect our results from within the Validate method.  Instead of calling our process asynchronously, we call it synchronously, and we return the list of results.</p>
<p>Now, for applying the [AsyncValidation] attribute to our entities, I’ve created a server-side AsyncValidationAttribute class.  Interestingly, this attribute doesn’t derive from ValidationAttribute like our Silverlight attribute did.  On the server, this attribute isn’t going to perform any validation, since it’s all done in one step for IValidatableObject.  So, this attribute is just a marker to allow metadata to flow through to the client-side proxy classes.  The namespace and class name match what’s on the client, and .NET RIA Services will automatically flow this metadata through for us.</p>
<h4>Calling ValidateProperty() for Async Validation</h4>
<p>Things seem to be rolling pretty smoothly at this point, but there’s one problem left that is preventing this from working.  This whole idea is based on the DataForm calling UpdateSource on each field’s binding, and having that trigger property-level validation.  But this doesn’t work because of the way the entity’s property setters are generated in the client-side proxies.  Here’s a sample property setter that .NET RIA Services generates, with our [AsyncValidation] attribute nicely applied:</p>
<div style="BORDER-BOTTOM: gray 1px solid; BORDER-LEFT: gray 1px solid; PADDING-BOTTOM: 4px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 20px 0px 10px; PADDING-LEFT: 4px; WIDTH: 97.5%; PADDING-RIGHT: 4px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; MAX-HEIGHT: 1000px; FONT-SIZE: 8pt; OVERFLOW: auto; BORDER-TOP: gray 1px solid; CURSOR: text; BORDER-RIGHT: gray 1px solid; PADDING-TOP: 4px">
<div style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px">
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   1:</span> [AsyncValidation()]</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   2:</span> [DataMember()]</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   3:</span> <span style="COLOR: #0000ff">public</span> <span style="COLOR: #0000ff">char</span> Gender</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   4:</span> {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   5:</span>     get</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   6:</span>     {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   7:</span>         <span style="COLOR: #0000ff">return</span> <span style="COLOR: #0000ff">this</span>._gender;</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   8:</span>     }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   9:</span>     set</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  10:</span>     {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  11:</span>         <span style="COLOR: #0000ff">if</span> ((<span style="COLOR: #0000ff">this</span>._gender != <span style="COLOR: #0000ff">value</span>))</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  12:</span>         {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  13:</span>             <span style="COLOR: #0000ff">this</span>.ValidateProperty(<span style="COLOR: #006080">"Gender"</span>, <span style="COLOR: #0000ff">value</span>);</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  14:</span>             <span style="COLOR: #0000ff">this</span>.OnGenderChanging(<span style="COLOR: #0000ff">value</span>);</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  15:</span>             <span style="COLOR: #0000ff">this</span>.RaiseDataMemberChanging(<span style="COLOR: #006080">"Gender"</span>);</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  16:</span>             <span style="COLOR: #0000ff">this</span>._gender = <span style="COLOR: #0000ff">value</span>;</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  17:</span>             <span style="COLOR: #0000ff">this</span>.RaiseDataMemberChanged(<span style="COLOR: #006080">"Gender"</span>);</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  18:</span>             <span style="COLOR: #0000ff">this</span>.OnGenderChanged();</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  19:</span>         }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  20:</span>     }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  21:</span> }</pre>
</div>
</div>
<p><br />
The detail that tripped me up is that ValidateProperty() is only called if the property value has changed.  But in our case, we trigger the UpdateSource() calls twice – once for the standard validation, then a second time after we receive the async validation results.  Upon the second execution of this, the property value hasn’t changed, and ValidateProperty() is not called.  Somehow, we need to force ValidateProperty() to get called for each field displayed by the DataForm.  CodeProcessor <em>(and my co-worker Warren Aldred)</em> to the rescue!</p>
<p>.NET RIA Services allows you to decorate your DomainService with a CodeProcessor.  This CodeProcessor can hook into the code generation for the client-side proxies, and manipulate the CodeDom of the generated code.  We want to manipulate any properties marked with [AsyncValidation] so that the property looks like this:</p>
<div style="BORDER-BOTTOM: gray 1px solid; BORDER-LEFT: gray 1px solid; PADDING-BOTTOM: 4px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 20px 0px 10px; PADDING-LEFT: 4px; WIDTH: 97.5%; PADDING-RIGHT: 4px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; MAX-HEIGHT: 2000px; FONT-SIZE: 8pt; OVERFLOW: auto; BORDER-TOP: gray 1px solid; CURSOR: text; BORDER-RIGHT: gray 1px solid; PADDING-TOP: 4px">
<div style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px">
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   1:</span> [AsyncValidation()]</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   2:</span> [DataMember()]</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   3:</span> <span style="COLOR: #0000ff">public</span> <span style="COLOR: #0000ff">char</span> Gender</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   4:</span> {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   5:</span>     get</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   6:</span>     {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   7:</span>         <span style="COLOR: #0000ff">return</span> <span style="COLOR: #0000ff">this</span>._gender;</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   8:</span>     }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   9:</span>     set</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  10:</span>     {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  11:</span>         <span style="COLOR: #008000">// Validate this property even if the value hasn't changed, so that the async validation can occur properly</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  12:</span>         <span style="COLOR: #0000ff">this</span>.ValidateProperty(<span style="COLOR: #006080">"Gender"</span>, <span style="COLOR: #0000ff">value</span>);</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  13:</span>  </pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  14:</span>         <span style="COLOR: #0000ff">if</span> ((<span style="COLOR: #0000ff">this</span>._gender != <span style="COLOR: #0000ff">value</span>))</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  15:</span>         {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  16:</span>             <span style="COLOR: #0000ff">this</span>.OnGenderChanging(<span style="COLOR: #0000ff">value</span>);</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  17:</span>             <span style="COLOR: #0000ff">this</span>.RaiseDataMemberChanging(<span style="COLOR: #006080">"Gender"</span>);</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  18:</span>             <span style="COLOR: #0000ff">this</span>._gender = <span style="COLOR: #0000ff">value</span>;</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  19:</span>             <span style="COLOR: #0000ff">this</span>.RaiseDataMemberChanged(<span style="COLOR: #006080">"Gender"</span>);</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  20:</span>             <span style="COLOR: #0000ff">this</span>.OnGenderChanged();</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  21:</span>         }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  22:</span>     }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  23:</span> }</pre>
</div>
</div>
<p><br />
It’s a very slight modification.  We just move the ValidateProperty() call to happen before we check for a value change.  And the good news is that I have packaged this CodeProcessor up with my QuickSilverlight.Validation library, so you don’t even need to mess with CodeDom.  I built an AsyncValidationCodeProcessor that can be used either directly, or you can compose its functionality into another CodeProcessor if you’re already using one.  I respected composition over inheritance here, so that you could apply async validation even if you’re already manipulating the CodeDom.</p>
<h4>Applying [AsyncValidation] to an Entity</h4>
<p>Since I was manipulating the CodeDom, I figured I might as well add one more feature related to the [AsyncValidation] attribute too.  If you want to turn async validation on for all of your entity’s properties, you can simply apply the [AsyncValidation] attribute to the entity class itself, and the AsyncValidationCodeProcessor will explode this onto all properties that make calls to ValidateProperty().</p>
<h3>How to Use QuickSilverlight.Validation</h3>
<p>Now that we have designed a working solution, let’s look at what you need to do to get async validation working on your entity, using QuickSilverlight.Validation and the AdventureWorks Employee entity.  For my example, I added a stored procedure to the AdventureWorks database:</p>
<div style="BORDER-BOTTOM: gray 1px solid; BORDER-LEFT: gray 1px solid; PADDING-BOTTOM: 4px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 20px 0px 10px; PADDING-LEFT: 4px; WIDTH: 97.5%; PADDING-RIGHT: 4px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; MAX-HEIGHT: 2000px; FONT-SIZE: 8pt; OVERFLOW: auto; BORDER-TOP: gray 1px solid; CURSOR: text; BORDER-RIGHT: gray 1px solid; PADDING-TOP: 4px">
<div style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px">
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   1:</span> <span style="COLOR: #0000ff">ALTER</span> <span style="COLOR: #0000ff">PROCEDURE</span> dbo.GetEmployeeValidationErrors</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   2:</span>     @gender <span style="COLOR: #0000ff">char</span>(1)</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   3:</span> ,    @maritalStatus <span style="COLOR: #0000ff">char</span>(1)</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   4:</span> <span style="COLOR: #0000ff">AS</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   5:</span>     </pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   6:</span>     <span style="COLOR: #0000ff">SELECT</span>    FieldName = <span style="COLOR: #006080">'Gender'</span>, ErrorMesssage = <span style="COLOR: #006080">'The two valid values are '</span><span style="COLOR: #006080">'M'</span><span style="COLOR: #006080">'/'</span><span style="COLOR: #006080">'F'</span><span style="COLOR: #006080">''</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   7:</span>     <span style="COLOR: #0000ff">WHERE</span>    @gender <span style="COLOR: #0000ff">IS</span> <span style="COLOR: #0000ff">NOT</span> <span style="COLOR: #0000ff">NULL</span> <span style="COLOR: #0000ff">AND</span> @gender <span style="COLOR: #0000ff">NOT</span> <span style="COLOR: #0000ff">IN</span> (<span style="COLOR: #006080">'M'</span>, <span style="COLOR: #006080">'m'</span>, <span style="COLOR: #006080">'F'</span>, <span style="COLOR: #006080">'f'</span>)</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   8:</span>  </pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   9:</span>     <span style="COLOR: #0000ff">UNION</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  10:</span>     <span style="COLOR: #0000ff">SELECT</span>    FieldName = <span style="COLOR: #006080">'MaritalStatus'</span>, ErrorMessage = <span style="COLOR: #006080">'The two valid values are '</span><span style="COLOR: #006080">'S'</span><span style="COLOR: #006080">'/'</span><span style="COLOR: #006080">'M'</span><span style="COLOR: #006080">''</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  11:</span>     <span style="COLOR: #0000ff">WHERE</span>    @maritalStatus <span style="COLOR: #0000ff">IS</span> <span style="COLOR: #0000ff">NOT</span> <span style="COLOR: #0000ff">NULL</span> <span style="COLOR: #0000ff">AND</span> @maritalStatus <span style="COLOR: #0000ff">NOT</span> <span style="COLOR: #0000ff">IN</span> (<span style="COLOR: #006080">'S'</span>, <span style="COLOR: #006080">'s'</span>, <span style="COLOR: #006080">'M'</span>, <span style="COLOR: #006080">'m'</span>)</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  12:</span>     </pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  13:</span>     <span style="COLOR: #0000ff">RETURN</span></pre>
</div>
</div>
<p> </p>
<p>I then expose this stored procedure through a Silverlight-enabled WCF service, creating a ValidationService.svc.</p>
<div style="BORDER-BOTTOM: gray 1px solid; BORDER-LEFT: gray 1px solid; PADDING-BOTTOM: 4px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 20px 0px 10px; PADDING-LEFT: 4px; WIDTH: 97.5%; PADDING-RIGHT: 4px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; MAX-HEIGHT: 2000px; FONT-SIZE: 8pt; OVERFLOW: auto; BORDER-TOP: gray 1px solid; CURSOR: text; BORDER-RIGHT: gray 1px solid; PADDING-TOP: 4px">
<div style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px">
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   1:</span> [ServiceContract(Namespace = <span style="COLOR: #006080">"AsyncValidationSample.Web.ValidationService"</span>)]</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   2:</span> [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   3:</span> <span style="COLOR: #0000ff">public</span> <span style="COLOR: #0000ff">class</span> ValidationService</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   4:</span> {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   5:</span>     [OperationContract]</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   6:</span>     <span style="COLOR: #0000ff">public</span> List&lt;GetEmployeeValidationErrorsResult&gt; ValidateEmployee(<span style="COLOR: #0000ff">char</span> gender, <span style="COLOR: #0000ff">char</span> maritalStatus)</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   7:</span>     {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   8:</span>         var context = <span style="COLOR: #0000ff">new</span> AdventureWorksDataContext();</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   9:</span>         <span style="COLOR: #0000ff">return</span> context.GetEmployeeValidationErrors(gender, maritalStatus).ToList();</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  10:</span>     }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  11:</span> }</pre>
</div>
</div>
<h4>Step 1: Decorate the DomainService</h4>
<p>We need to apply the CodeProcessor to the DomainService.  This is done through a simple attribute, specifying the CodeProcessor type.</p>
<div style="BORDER-BOTTOM: gray 1px solid; BORDER-LEFT: gray 1px solid; PADDING-BOTTOM: 4px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 20px 0px 10px; PADDING-LEFT: 4px; WIDTH: 97.5%; PADDING-RIGHT: 4px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; MAX-HEIGHT: 2000px; FONT-SIZE: 8pt; OVERFLOW: auto; BORDER-TOP: gray 1px solid; CURSOR: text; BORDER-RIGHT: gray 1px solid; PADDING-TOP: 4px">
<div style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px">
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   1:</span> [EnableClientAccess()]</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   2:</span> [DomainIdentifier(<span style="COLOR: #006080">"EmployeeService"</span>, CodeProcessor = <span style="COLOR: #0000ff">typeof</span>(AsyncValidationCodeProcessor))]</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   3:</span> <span style="COLOR: #0000ff">public</span> <span style="COLOR: #0000ff">class</span> EmployeeService : LinqToSqlDomainService&lt;AdventureWorksDataContext&gt;</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   4:</span> {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   5:</span>     ...</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   6:</span> }</pre>
</div>
</div>
<p><br />
If you are already using a custom CodeProcessor, then just hook the 2 together by calling the AsyncValidationCodeProcessor.ProcessAsyncValidationProperties method from within your CodeProcessor.</p>
<h4>Step 2: Implement IValidatableObject</h4>
<p>Using a partial class for your entity on the server, implement this interface to get validation results to be returned as part of the entity-level validation.  This is where I call my ValidationService.ValidateEmployee method from the server-side validation.</p>
<div style="BORDER-BOTTOM: gray 1px solid; BORDER-LEFT: gray 1px solid; PADDING-BOTTOM: 4px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 20px 0px 10px; PADDING-LEFT: 4px; WIDTH: 97.5%; PADDING-RIGHT: 4px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; MAX-HEIGHT: 200px; FONT-SIZE: 8pt; OVERFLOW: auto; BORDER-TOP: gray 1px solid; CURSOR: text; BORDER-RIGHT: gray 1px solid; PADDING-TOP: 4px">
<div style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px">
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   1:</span> <span style="COLOR: #0000ff">public</span> <span style="COLOR: #0000ff">partial</span> <span style="COLOR: #0000ff">class</span> Employee : IValidatableObject</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   2:</span> {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   3:</span>     <span style="COLOR: #0000ff">public</span> IEnumerable&lt;ValidationResult&gt; Validate(ValidationContext validationContext)</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   4:</span>     {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   5:</span>         <span style="COLOR: #0000ff">return</span> from error <span style="COLOR: #0000ff">in</span> <span style="COLOR: #0000ff">new</span> ValidationService().ValidateEmployee(<span style="COLOR: #0000ff">this</span>.Gender, <span style="COLOR: #0000ff">this</span>.MaritalStatus)</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   6:</span>                select <span style="COLOR: #0000ff">new</span> ValidationResult(error.ErrorMesssage, <span style="COLOR: #0000ff">new</span> <span style="COLOR: #0000ff">string</span>[] { error.FieldName });</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   7:</span>     }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   8:</span> }</pre>
</div>
</div>
<p><br />
</p>
<h4>Step 3: Apply [AsyncValidation]</h4>
<p>You can apply this attribute either to the entity class or to specific properties.  In my case, I am only producing async validation errors for the Gender and MaritalStatus properties, so I will only apply the attribute to those properties.  Using the EmployeeMetadata class, I apply the attribute to the 2 fields that correspond to the desired properties.</p>
<div style="BORDER-BOTTOM: gray 1px solid; BORDER-LEFT: gray 1px solid; PADDING-BOTTOM: 4px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 20px 0px 10px; PADDING-LEFT: 4px; WIDTH: 97.5%; PADDING-RIGHT: 4px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; MAX-HEIGHT: 2000px; FONT-SIZE: 8pt; OVERFLOW: auto; BORDER-TOP: gray 1px solid; CURSOR: text; BORDER-RIGHT: gray 1px solid; PADDING-TOP: 4px">
<div style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px">
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   1:</span> <span style="COLOR: #0000ff">internal</span> <span style="COLOR: #0000ff">sealed</span> <span style="COLOR: #0000ff">class</span> EmployeeMetadata</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   2:</span> {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   3:</span>     [AsyncValidation]</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   4:</span>     <span style="COLOR: #0000ff">public</span> <span style="COLOR: #0000ff">char</span> Gender;</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   5:</span>  </pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   6:</span>     [AsyncValidation]</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   7:</span>     <span style="COLOR: #0000ff">public</span> <span style="COLOR: #0000ff">char</span> MaritalStatus;</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   8:</span> }</pre>
</div>
</div>
<p> </p>
<p><em>(I’ve trimmed out the unrelated code from this snippet)</em></p>
<h4>Step 4: Implement IAsyncValidatableObject on the Client</h4>
<p>This article hasn’t yet discussed the details for how an entity on the client will actually perform its async validation.  For the most part, this will be domain specific.  But the solution integrates with your domain-specific validation by using an interface called IAsyncValidatableObject.  <em>Note that this interface is NOT part of DataAnnotations, but rather a custom interface created solely for QuickSilverlight.Validation.</em></p>
<div style="BORDER-BOTTOM: gray 1px solid; BORDER-LEFT: gray 1px solid; PADDING-BOTTOM: 4px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 20px 0px 10px; PADDING-LEFT: 4px; WIDTH: 97.5%; PADDING-RIGHT: 4px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; MAX-HEIGHT: 2000px; FONT-SIZE: 8pt; OVERFLOW: auto; BORDER-TOP: gray 1px solid; CURSOR: text; BORDER-RIGHT: gray 1px solid; PADDING-TOP: 4px">
<div style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px">
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   1:</span> <span style="COLOR: #0000ff">namespace</span> QuickSilverlight.Validation</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   2:</span> {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   3:</span>     <span style="COLOR: #008000">/// &lt;summary&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   4:</span>     <span style="COLOR: #008000">/// Interface to indicate that an object supports asynchronous validation.</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   5:</span>     <span style="COLOR: #008000">/// &lt;/summary&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   6:</span>     <span style="COLOR: #0000ff">public</span> <span style="COLOR: #0000ff">interface</span> IAsyncValidatableObject</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   7:</span>     {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   8:</span>         <span style="COLOR: #008000">/// &lt;summary&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   9:</span>         <span style="COLOR: #008000">/// Method called to invoke the asynchronous validation operation.</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  10:</span>         <span style="COLOR: #008000">/// &lt;/summary&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  11:</span>         <span style="COLOR: #008000">/// &lt;param name="userState"&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  12:</span>         <span style="COLOR: #008000">/// State information that must be provided to the &lt;see cref="AsyncValidationCompletedEventArgs"/&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  13:</span>         <span style="COLOR: #008000">/// used on the &lt;see cref="AsyncValidationCompleted"/&gt; event.</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  14:</span>         <span style="COLOR: #008000">/// &lt;/param&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  15:</span>         <span style="COLOR: #0000ff">void</span> ValidateAsync(AsyncValidationState validationState);</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  16:</span>  </pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  17:</span>         <span style="COLOR: #008000">/// &lt;summary&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  18:</span>         <span style="COLOR: #008000">/// The event to raise when asynchronous validation is completed.  The</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  19:</span>         <span style="COLOR: #008000">/// &lt;see cref="AsyncValidationCompletedEventArgs"/&gt; must be given the validationState provided to</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  20:</span>         <span style="COLOR: #008000">/// the &lt;see cref="ValidateAsync"/&gt; method.</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  21:</span>         <span style="COLOR: #008000">/// &lt;/summary&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  22:</span>         <span style="COLOR: #0000ff">event</span> EventHandler&lt;AsyncValidationCompletedEventArgs&gt; AsyncValidationCompleted;</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  23:</span>     }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  24:</span> }</pre>
</div>
</div>
<p><br />
Here’s how my Employee class implements the interface, calling the same WCF service that was called from IValidatableObject on the server.</p>
<div style="BORDER-BOTTOM: gray 1px solid; BORDER-LEFT: gray 1px solid; PADDING-BOTTOM: 4px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 20px 0px 10px; PADDING-LEFT: 4px; WIDTH: 97.5%; PADDING-RIGHT: 4px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; MAX-HEIGHT: 2000px; FONT-SIZE: 8pt; OVERFLOW: auto; BORDER-TOP: gray 1px solid; CURSOR: text; BORDER-RIGHT: gray 1px solid; PADDING-TOP: 4px">
<div style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px">
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   1:</span> <span style="COLOR: #0000ff">public</span> <span style="COLOR: #0000ff">partial</span> <span style="COLOR: #0000ff">class</span> Employee : IAsyncValidatableObject</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   2:</span> {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   3:</span>     <span style="COLOR: #0000ff">private</span> ValidationService.ValidationServiceClient _validationService;</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   4:</span>  </pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   5:</span>     <span style="COLOR: #008000">/// &lt;summary&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   6:</span>     <span style="COLOR: #008000">/// Begin Async validation by calling our WCF service method.</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   7:</span>     <span style="COLOR: #008000">/// &lt;/summary&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   8:</span>     <span style="COLOR: #008000">/// &lt;remarks&gt;Explicitly implement the interface method.&lt;/remarks&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   9:</span>     <span style="COLOR: #008000">/// &lt;param name="validationState"&gt;The validation state to pass through to the &lt;see cref="AsyncValidationCompleted"/&gt; event.&lt;/param&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  10:</span>     <span style="COLOR: #0000ff">void</span> IAsyncValidatableObject.ValidateAsync(AsyncValidationState validationState)</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  11:</span>     {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  12:</span>         <span style="COLOR: #0000ff">if</span> (<span style="COLOR: #0000ff">this</span>._validationService == <span style="COLOR: #0000ff">null</span>)</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  13:</span>         {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  14:</span>             <span style="COLOR: #0000ff">this</span>._validationService = <span style="COLOR: #0000ff">new</span> AsyncValidationSample.ValidationService.ValidationServiceClient();</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  15:</span>             <span style="COLOR: #0000ff">this</span>._validationService.ValidateEmployeeCompleted += ValidateEmployeeCompleted;</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  16:</span>         }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  17:</span>  </pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  18:</span>         <span style="COLOR: #0000ff">this</span>._validationService.ValidateEmployeeAsync(<span style="COLOR: #0000ff">this</span>.Gender, <span style="COLOR: #0000ff">this</span>.MaritalStatus, validationState);</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  19:</span>     }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  20:</span>  </pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  21:</span>     <span style="COLOR: #008000">/// &lt;summary&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  22:</span>     <span style="COLOR: #008000">/// Handle the completion of our WCF service call, translating the results into our async validation results, and</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  23:</span>     <span style="COLOR: #008000">/// then calling the callback supplied to &lt;see cref="IAsyncValidationEntity.ValidateAsync"/&gt;.</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  24:</span>     <span style="COLOR: #008000">/// &lt;/summary&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  25:</span>     <span style="COLOR: #008000">/// &lt;param name="sender"&gt;The event sender.&lt;/param&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  26:</span>     <span style="COLOR: #008000">/// &lt;param name="e"&gt;The event args for the event.&lt;/param&gt;</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  27:</span>     <span style="COLOR: #0000ff">private</span> <span style="COLOR: #0000ff">void</span> ValidateEmployeeCompleted(<span style="COLOR: #0000ff">object</span> sender, ValidateEmployeeCompletedEventArgs e)</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  28:</span>     {</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  29:</span>         IEnumerable&lt;ValidationResult&gt; results = e.Result.Select(r =&gt; <span style="COLOR: #0000ff">new</span> ValidationResult(r.ErrorMesssage, <span style="COLOR: #0000ff">new</span> <span style="COLOR: #0000ff">string</span>[] { r.FieldName}));</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  30:</span>         <span style="COLOR: #0000ff">this</span>.AsyncValidationCompleted(<span style="COLOR: #0000ff">this</span>, <span style="COLOR: #0000ff">new</span> AsyncValidationCompletedEventArgs(results, e.UserState <span style="COLOR: #0000ff">as</span> AsyncValidationState));</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  31:</span>     }</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  32:</span>  </pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  33:</span>     <span style="COLOR: #0000ff">public</span> <span style="COLOR: #0000ff">event</span> EventHandler&lt;AsyncValidationCompletedEventArgs&gt; AsyncValidationCompleted = <span style="COLOR: #0000ff">delegate</span> { };</pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">  34:</span> }</pre>
</div>
</div>
<p><br />
There are a few important points to make about this code:</p>
<ol>
    <li>ValidateAsync receives an AsyncValidationState object.  This object is required to be passed into the AsyncValidationCompletedEventArgs constructor.  This is the glue that holds the end-to-end process together. </li>
    <li>AsyncValidationCompletedEventArgs accepts the IEnumerable&lt;ValidationResult&gt; produced by your validation.  So you must project whatever type of results you get into an enumerable of ValidationResult instances.  Be sure to provide the array of member names as the second parameter in the ValidationResult constructor. </li>
    <li>I chose to implement ValidateAsync explicitly, so that it wouldn’t clutter the API for my Employee entity. </li>
</ol>
<h4>Step 5: Enable Async Validation on the DataForm</h4>
<p>As mentioned very early on, this solution relies on subscribing to the EditEnding event of the DataForm.  <a target="_blank" href="http://blogs.msdn.com/johngossman/archive/2008/05/07/the-attached-behavior-pattern.aspx">Attached Behaviors</a> save the day here.  The QuickSilverlight.Validation library includes an AsyncValidation class that takes care of all of the logic described for bending the DataForm to our will.  This class includes an attached property called Enabled.  By setting it to true for a DataForm, it will subscribe to the EditEnding event and ensure that the async validation is processed.</p>
<p>Here’s what you need to do in your XAML to enable async validation for a DataForm:</p>
<div style="BORDER-BOTTOM: gray 1px solid; BORDER-LEFT: gray 1px solid; PADDING-BOTTOM: 4px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 20px 0px 10px; PADDING-LEFT: 4px; WIDTH: 97.5%; PADDING-RIGHT: 4px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; MAX-HEIGHT: 2000px; FONT-SIZE: 8pt; OVERFLOW: auto; BORDER-TOP: gray 1px solid; CURSOR: text; BORDER-RIGHT: gray 1px solid; PADDING-TOP: 4px">
<div style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px">
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: white; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   1:</span> <span style="COLOR: #0000ff">&lt;</span><span style="COLOR: #800000">df:DataForm</span> <span style="COLOR: #ff0000">x:Name</span><span style="COLOR: #0000ff">="EmployeeForm"</span> <span style="COLOR: #ff0000">AutoCommit</span><span style="COLOR: #0000ff">="False"</span></pre>
<pre style="BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px; LINE-HEIGHT: 12pt; BACKGROUND-COLOR: #f4f4f4; MARGIN: 0em; BORDER-LEFT-STYLE: none; PADDING-LEFT: 0px; WIDTH: 100%; PADDING-RIGHT: 0px; FONT-FAMILY: consolas, 'Courier New', courier, monospace; BORDER-TOP-STYLE: none; COLOR: black; BORDER-RIGHT-STYLE: none; FONT-SIZE: 8pt; OVERFLOW: visible; PADDING-TOP: 0px"><span style="COLOR: #606060">   2:</span>              <span style="COLOR: #ff0000">qsv:AsyncValidation</span>.<span style="COLOR: #ff0000">Enabled</span><span style="COLOR: #0000ff">="True"</span> <span style="COLOR: #0000ff">/&gt;</span></pre>
</div>
</div>
<p><br />
Yes, seriously, that’s it!  Just set AsyncValidation.Enabled=”True” and the DataForm will behave as we need.  Of course, setting Enabled=”False” will disable the behavior by unsubscribing from the EditEnding event.  There’s no code required in the code-behind to make this work either.</p>
<h4>QuickSilverlight.Validation Library</h4>
<p>This library includes 2 assemblies: QuickSilverlight.Validation for the Silverlight side of things; and QuickSilverlight.Validation.Web for the server side of things, to integrate with .NET RIA Services.  On the client side, there’s no dependency on .NET RIA Services.  So this can also be used for classes that were not generated by .NET RIA Services.</p>
<p>The source code, binaries, and my example can be found here: <br />
<a title="Download QuickSilverlight.Validation.zip" target="_blank" href="http://jeffhandley.com/Files/QuickSilverlight.Validation.zip">QuickSilverlight.Validation.zip</a></p>
<p> </p>
<div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; DISPLAY: inline; FLOAT: none; PADDING-TOP: 0px" id="scid:0767317B-992E-4b12-91E0-4F059A8CECA8:7301221b-491c-412f-a525-23f4779ad071" class="wlWriterSmartContent"><br />
Technorati Tags: <a rel="tag" href="http://technorati.com/tags/Validation">Validation</a>,<a rel="tag" href="http://technorati.com/tags/RIAServices">RIAServices</a>,<a rel="tag" href="http://technorati.com/tags/Silverlight">Silverlight</a>,<a rel="tag" href="http://technorati.com/tags/DataForm">DataForm</a>,<a rel="tag" href="http://technorati.com/tags/WCF">WCF</a></div>

