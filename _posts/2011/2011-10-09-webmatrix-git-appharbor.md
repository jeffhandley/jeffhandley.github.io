---
layout: post
title: "WebMatrix, Git, and AppHarbor"
date: 2011-10-09 06:25:28 -0700
comments: true
tags: ["WebMatrix", "Git", "AppHarbor"]
redirect_from: ["/archive/2011/10/08/WebMatrix-Git-AppHarbor.aspx/", "/archive/2011/10/08/webmatrix-git-appharbor.aspx"]
author: "Jeff Handley"
---
<!-- more -->
<p>I needed to crank out a single-page web site for my son, to help him promote his popcorn sales for cub scouts.  I decided it was a perfect opportunity to try some new things, so I jumped into WebMatrix to create the site, added it to a Git repository, and deployed it to AppHarbor under Xander’s own domain name.  Start to finish, it took 30 minutes and my son gave me an A+.</p>  <h3><a title="Install WebMatrix 2 Beta Now" href="http://www.microsoft.com/web/handlers/webpi.ashx?command=getprereleaseinstaller&amp;appid=webmatrix" target="_blank"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: right; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Install WebMatrix 2 Beta Now" border="0" alt="Install WebMatrix 2 Beta Now" align="right" src="/img/postimages/ASP.NET-Web-Pages-WebMatrix-Git-and-AppH_12A63/image_e61c6c3d-c7e6-4703-9fa0-3991a847a6f7.png" width="488" height="109" /></a>Installing WebMatrix</h3>  <p>WebMatrix is one of the easiest-to-install Microsoft products ever.  Really.  Just go to <a href="http://www.microsoft.com/web/webmatrix/">http://www.microsoft.com/web/webmatrix/</a> and click the big green button for “Install WebMatrix” or “Or try the latest Beta.”  I decided to try the latest beta, and after just a couple more simple clicks and about 4 minutes, WebMatrix 2 Beta was on my machine and open.</p>  <h3>Creating the Web Site</h3>  <p>I clicked on Templates and since this is going to be an extremely simple, one-page site, I went for the “Empty Site” template.  The Personal Site template was tempting, but over-the-top for my needs.  WebMatrix created the site in moments and then gave me a nice start page.  I immediately jumped to the “Files” view and here’s what I saw I was given:</p>  <p><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/img/postimages/ASP.NET-Web-Pages-WebMatrix-Git-and-AppH_12A63/image_a65df55a-8427-4746-845c-60583b6159d7.png" width="302" height="458" /></p>  <p>I created a new Popcorn.cshtml file that contains the content my son helped author.  It was a no-brainer to use the CSHTML file, as that lets me use the awesome Razor syntax as needed.  I created an /images folder and a /videos folder, where I put some media I had prepared.  Then I hit the Run button.  <em>Yes, I prefer Chrome.</em></p>  <p><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/img/postimages/ASP.NET-Web-Pages-WebMatrix-Git-and-AppH_12A63/image_5029ba9c-361a-4fcc-8341-bf47ed4c4f5a.png" width="186" height="202" /></p>  <p>Since I had added my content to Popcorn.cshtml, and hadn’t added anything to the Default.cshtml, I got a blank page.  That’s good with me, as a default page is out of scope for tonight’s project. :-)  What I really wanted to see is what I got when I browsed to /popcorn…</p>  <p><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/img/postimages/ASP.NET-Web-Pages-WebMatrix-Git-and-AppH_12A63/image_0324e3d1-1613-41c2-bc26-8e0ec872c577.png" width="690" height="297" /></p>  <p>Perfect!  Notice that I didn’t have to browse to popcorn.cshtml – just /popcorn is sufficient because ASP.NET Web Pages automatically routes this form me.  That feels so much cleaner than creating a popcorn folder and adding a default.cshtml to it.  So, the website is now complete and ready for source control.</p>  <h3 />  <h3>Installing Git</h3>  <p>github has an <strong><em>awesome</em></strong> page for setting up Git.  There’s no need for me to repeat anything here.  Just <a href="http://help.github.com/win-set-up-git/" target="_blank">go to github’s page</a> and then come back here when you’re ready. </p>  <h3>Creating the Git Repository</h3>  <p>This was easy stuff.  Using Git Bash, here’s what it took to initialize the Git repository, add the website, review the pending changes, and commit them.</p>  <p><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/img/postimages/ASP.NET-Web-Pages-WebMatrix-Git-and-AppH_12A63/image_45bba832-ebc9-4b14-b090-4f4197a4a7a2.png" width="677" height="963" /></p>  <h3>Deploying to AppHarbor</h3>  <p>If you’re not familiar with <a href="http://appharbor.com" target="_blank">AppHarbor</a>, it’s a service that lets you host sites using Git to push a repository to the cloud (no, it’s not Azure – shame).  AppHarbor will host this site for free, which is a requirement for this project.  Signing up for AppHarbor was extremely simple and took about 1 minute.</p>  <p>Before I could deploy, I needed to first create an application.  It’s a single-field form.  Seriously.</p>  <p><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/img/postimages/ASP.NET-Web-Pages-WebMatrix-Git-and-AppH_12A63/image_61797304-8c08-4d44-a0f3-23f7e33cb940.png" width="291" height="230" /></p>  <p>After naming the application and clicking Create, I was given idiot-proof instructions for how to set up a Git repository, configure it to push to AppHarbor, and do my first push.  Since I already initialized the repository, I skipped down to the “<strong>Add AppHarbor Repository and Push</strong>” section.</p>  <p><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/img/postimages/ASP.NET-Web-Pages-WebMatrix-Git-and-AppH_12A63/image_1b8411f7-d261-401f-961a-4bbbd80294c0.png" width="677" height="472" /></p>  <p>At that point, the site was deployed to AppHarbor and running in the cloud.  Browsing to <a href="http://xanderhandley.apphb.com/popcorn/">http://xanderhandley.apphb.com/popcorn/</a> worked. I was close to finished; I just needed to set up the custom hostname.</p>  <h3>Using a Custom Hostname</h3>  <p>I wanted the site to have an easy URL, with <a href="http://xanderhandley.com/popcorn">http://xanderhandley.com/popcorn</a> as the goal.  Needless to say, I already own xanderhandley.com, so I just needed to point it to AppHarbor.  This was another single-field form on AppHarbor’s site, reached by clicking on the “Hostnames” menu link.</p>  <p><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/img/postimages/ASP.NET-Web-Pages-WebMatrix-Git-and-AppH_12A63/image_5feb993c-1196-45f8-b5e3-c7d41979da80.png" width="476" height="348" /></p>  <p>Before hitting ‘Add hostname,’ I copied the IP address to my clipboard.  Then I went off to my DNS settings for the domain and configured an A record for the domain to point to that IP address.  After a few minutes of propagation, it worked.  <a href="http://xanderhandley.com/popcorn">http://xanderhandley.com/popcorn</a> loads the site I created in WebMatrix just 30 minutes ago, and Xander’s now able to sell popcorn online!</p>

