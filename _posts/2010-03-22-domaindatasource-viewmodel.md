---
layout: post
title: "DomainDataSource in a ViewModel"
date: 2010-03-22 04:05:16 -0700
comments: true
category: Archive
tags: []
redirect_from: ["/archive/2010/03/21/domaindatasource-viewmodel.aspx"]
author: 0
---
<!-- more -->
<p><em>As I was writing up a response to the questions on a forums post about <a href="http://forums.silverlight.net/forums/t/169705.aspx" target="_blank">using DomainDataSource from a ViewModel</a>, I thought I should just publish the notes here.  I hope this helps people understand what will and will not work from the DomainDataSource when being used outside the visual tree.</em></p>  <p>I've heard many times that people are using the DomainDataSource in ViewModel scenarios.  Contrary to popular belief, this can work very well with the control as it is today; there are only a couple features that won't work outside the visual tree.  Aside from these two items, everything the DomainDataSource does is supported in a ViewModel.</p>  <h4>AutoLoad</h4>  <p>In order for auto-load to work, the control must be loaded into the UI tree.  Auto-loads are typically used when you have Filters, Sorts, and/or Query Parameters driven from UI controls.  The DomainDataSource will wait for control to get the Loaded event, and then dispatch the first auto-load.  Until that event occurs, all auto-loads are queued up.  When outside the visual tree, this Loaded event will never be raised and no auto-loads will ever occur.</p>  <p>Just because auto-loads won’t occur doesn’t mean you can’t use the DomainDataSource from a ViewModel.  Instead of relying on these automatic loads after changing property values, you can call the Load() method as needed.  With the Release Candidate of WCF RIA Services, we have relaxed the Load method such that it won’t throw exceptions if a load is already pending.  So if you call Load multiple times, we will cancel all but the last call.  Note that it is possible that the control will submit the load request to the server from a canceled load (and just ignore the response), but it should now be easier to programmatically call the Load method from your ViewModel.</p>  <h4>ElementName Bindings</h4>  <p><a href="http://jeffhandley.com/archive/2010/03/15/filters-parameters.aspx" target="_blank">As I illustrated recently</a>, DomainDataSource’s Filter, Sort, Group, and Query parameters now all support element name bindings for driving the control’s inputs from the UI.  These bindings won’t work when the control is not part of the visual tree or resources.  But chances are, if you’re using the DomainDataSource from a ViewModel, you aren’t trying to bind its inputs to UI elements.</p>  <h4>RIA Services vNext</h4>  <p>I’d love to hear more about your scenarios where the DomainDataSource isn’t working well for you when you’d like it to.  We’re working on our plans for the next version of RIA Services, so there’s no better time to share your feedback and suggestions! </p>

