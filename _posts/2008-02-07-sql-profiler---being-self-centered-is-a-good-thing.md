---
layout: post
title: "SQL Profiler - Being self-centered is a good thing"
date: 2008-02-07 23:44:37 -0800
comments: true
tags: ["SQL Server", "Profiler"]
redirect_from: ["/archive/2008/02/07/sql-profiler---being-self-centered-is-a-good-thing.aspx/"]
author: "Jeff Handley"
---
<!-- more -->
<p>I don't know why I hadn't taken the time to do this before, but I just invested 5 minutes into SQL Profiler to make my life much easier when debugging stored procedures.</p>  <p>When I'm faced with stored procedure debugging, especially procedures that take awhile to run, or require a series of steps in the application to fire off, I often use SQL Profiler to capture the SQL call.  Then I'll re-run the call directly in SQL Management Studio.  But SQL Profiler can bring back a lot of noise, making it tough to grab only what I need.</p>  <p>I finally created a custom trace template and set it to be my default.  It will only show me stored procedure calls made from my local workstation to the development database. <em>(we have a shared development database*)</em></p>  <p>I stumbled a little bit while setting this up, so I thought I'd share my settings.  First, start with the default, standard trace template by clicking to start a new trace.  Hitting the Events Selection tab allows you to customize the trace.</p>  <p><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="410" alt="Standard (default) trace template" src="http://blog.jeffhandley.com/Images/PostImages/SQLProfilerBeingselfcenteredisagoodthing_DAB3/image.png" width="644" border="0" /> </p>  <p>Since I'm always dealing with stored procedures (on my current project), I want to limit the events down to those.  I want to be self-centered and only see events that originated from my workstation, and only for the development database.</p>  <ol>   <li>Turn on Show all events</li>  <li>Turn on Show all columns</li>  <li>Uncheck all events except Stored Procedures: RPC:Completed and RPC:Starting</li>  <li>Click on Column Filters</li>  <li>Set a rule for ApplicationName Like [application name]</li>  <ol>   <li>This value is set within your <a href="http://johnnycoder.com/blog/2006/10/24/take-advantage-of-application-name/" target="_blank">connection string</a>.  In my case, it's "DASL-Development."</li>   </ol>  <li>Set a rule for DatabaseName Like [database name]</li>  <li>Set a rule for HostName Like [your workstation name]</li>  <li>Click OK</li> </ol>  <p><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="328" alt="Trace filter" src="http://blog.jeffhandley.com/Images/PostImages/SQLProfilerBeingselfcenteredisagoodthing_DAB3/image_3.png" width="419" border="0" /> </p>  <p>Then you can click Run to start your trace.  Click around in your application to make sure you're seeing what you expect.  If so, the next step is to save this as a template, then we'll make it the default.</p>  <p> <img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="389" alt="Save As Trace Template" src="http://blog.jeffhandley.com/Images/PostImages/SQLProfilerBeingselfcenteredisagoodthing_DAB3/image_4.png" width="547" border="0" /> </p>  <p>I named my template "Handley Development."  There is one step left to make this the default template.  This is where I had to dig to find the setting.  It's not under Tools-&gt;Options like I expected.  Instead, it's under File-&gt;Templates-&gt;Edit Template...</p>  <p> <img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="401" alt="Edit Template" src="http://blog.jeffhandley.com/Images/PostImages/SQLProfilerBeingselfcenteredisagoodthing_DAB3/image_5.png" width="496" border="0" /> </p>  <p>This brings up a dialog to edit any of your templates.  Select your new template from the dropdown and then check the box for 'Use as a default template for selected server type.'  Hit Save, and you're good to go!</p>  <p><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="76" alt="Use as a default template for selected server type" src="http://blog.jeffhandley.com/Images/PostImages/SQLProfilerBeingselfcenteredisagoodthing_DAB3/image_6.png" width="427" border="0" /> </p>  <p>Next time you start a new trace, this template will be selected by default.  The <a href="http://en.wikipedia.org/wiki/Signal-to-noise_ratio" target="_blank">signal to noise ratio</a> will be much better and you can quickly get the stored procedure call that you need.</p><hr /><em>* There's no need to tell me that <a title="I don't like categorical statements anyway" href="http://odetocode.com/Blogs/scott/archive/2008/01/30/11702.aspx" target="_blank">we shouldn't</a> be using a shared development database.  In our environment, with 60GB databases and such, the shared database works out much better than local ones.</em>

