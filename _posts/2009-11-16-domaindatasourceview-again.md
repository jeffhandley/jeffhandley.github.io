---
layout: post
title: "DomainDataSourceView API (DomainDataSource.DataView)"
date: 2009-11-16 11:11:03 -0800
comments: true
category: Archive
tags: []
redirect_from: ["/archive/2009/11/16/domaindatasourceview-again.aspx"]
author: 0
---
<!-- more -->
<p>DomainDataSource has two properties for getting the data out of it: Data and DataView.  The Data property is what’s intended for exposure in Binding scenarios, for instance binding a DataGrid to the DomainDataSource.  This property is typed very simply as an IEnumerable.  The DataView property however is intended to be used for programmatic access to the entities exposed by the DomainDataSource.  While the two properties currently return the same collection instance, this might not always be true, so it’s good to properly set the expectations of these two properties.  If you need to work with the collection from the DomainDataSource, you should use the DataView property; but for Binding, you should use the Data property.</p>  <p>Awhile back, I <a href="http://jeffhandley.com/archive/2009/07/21/domaindatasource-dataview.aspx" target="_blank">asked for input</a> on the DataView property and what API you would like to have for it.  We were designing a new class that would be created expressly for the purpose of the DomainDataSource.DataView property.  We wanted the API to do two thing for you: 1) Give you easy access to the properties and methods you will frequently use on the collection; and 2) Hide the properties and methods that are required to be implemented for interfaces but that you would not need to access programmatically often.  The result of this effort was a class named DomainDataSourceView.  You will see this with the PDC release of RIA Services.</p>  <h4>Frequently Used Members</h4>  <p>The following members are exposed as public properties and methods on the DomainDataSourceView class (DomainDataSource.DataView property):</p>  <ul>   <li>General Collection Members      <ul>       <li>int Count </li>        <li>object CurrentItem </li>        <li>int CurrentPosition </li>        <li>bool IsEmpty </li>        <li>int TotalItemCount </li>        <li>object this[int index] </li>        <li>EventHandler CurrentChanged </li>        <li>CurrentChangingEventHandler CurrentChanging </li>        <li>bool Contains(object item) </li>        <li>object GetItemAt(int index) </li>        <li>int IndexOf(object item) </li>        <li>bool MoveCurrentTo(object item) </li>        <li>bool MoveCurrentToFirst() </li>        <li>bool MoveCurrentToLast() </li>        <li>bool MoveCurrentToNext() </li>        <li>bool MoveCurrentToPosition(int position) </li>        <li>bool MoveCurrentToPrevious() </li>     </ul>   </li>    <li>Collection Editing Members      <ul>       <li>bool CanAdd </li>        <li>bool CanRemove </li>        <li>void Add(object item) </li>        <li>void Remove(object item) </li>        <li>void RemoteAt(int index) </li>     </ul>   </li>    <li>Paging Members      <ul>       <li>bool CanChangePage </li>        <li>int PageCount </li>        <li>int PageIndex </li>        <li>int PageSize </li>        <li>EventHandler&lt;EventArgs&gt; PageChanged </li>        <li>EventHandler&lt;PageChangingEventArgs&gt; PageChanging </li>        <li>bool MoveToFirstPage() </li>        <li>bool MoveToLastPage() </li>        <li>bool MoveToNextPage() </li>        <li>bool MoveToPage(int pageIndex) </li>        <li>bool MoveToPreviousPage() </li>     </ul>   </li> </ul>  <h4>Interface Implementations</h4>  <p>The following members are implemented on the DomainDataSourceView class, but they are explicitly implemented against the interfaces.  This means that you won’t get intellisense for the members, and you can’t use them directly, but if you (or Silverlight/SDK controls) cast an DomainDataSourceView instance to the interface, you can access the members.  This is done for members we don’t expect you to need frequently yourself, but they are needed for the interfaces.</p>  <ul>   <li>ICollectionView      <ul>       <li>bool CanFilter          <ul>           <li>This property will always return false since DomainDataSource doesn’t use Predicate-based filtering. </li>         </ul>       </li>        <li>bool CanGroup </li>        <li>bool CanSort </li>        <li>CultureInfo Culture </li>        <li>Predicate&lt;object&gt; Filter          <ul>           <li>This property will throw an exception, as CanFilter is always false since DomainDataSource doesn’t use Predicate-based filtering. </li>         </ul>       </li>        <li>ObservableCollection&lt;GroupDescription&gt; GroupDescriptions </li>        <li>ReadOnlyObservableCollection&lt;object&gt; Groups </li>        <li>bool IsCurrentAfterLast </li>        <li>bool IsCurrentBeforeFirst </li>        <li>SortDescriptionCollection SortDescriptions </li>        <li>IEnumerable SourceCollection </li>        <li>EventHandler CurrentChanged </li>        <li>CurrentChangingEventHandler CurrentChanging </li>        <li>IDisposable DeferRefresh() </li>        <li>void Refresh() </li>     </ul>   </li>    <li>IEnumerable      <ul>       <li>IEnumerator GetEnumerator() </li>     </ul>   </li>    <li>INotifyCollectionChanged      <ul>       <li>NotifyCollectionChangedEventHandler CollectionChanged </li>     </ul>   </li>    <li>IEditableCollectionView      <ul>       <li>bool CanAddNew </li>        <li>bool CanCancelEdit </li>        <li>object CurrentAddItem </li>        <li>object CurrentEditItem </li>        <li>bool IsAddingNew </li>        <li>bool IsEditingItem </li>        <li>NewItemPlaceholderPosition NewItemPlaceholderPosition </li>        <li>object AddNew() </li>        <li>void CancelEdit() </li>        <li>void CancelNew() </li>        <li>void CommitEdit() </li>        <li>void CommitNew() </li>        <li>void EditItem(object item) </li>     </ul>   </li>    <li>INotifyCollectionChanged      <ul>       <li>PropertyChangedEventHandler PropertyChanged          <ul>           <li>Only raises events for public properties, and not those are are only explicitly implemented on the interfaces </li>         </ul>       </li>     </ul>   </li> </ul>  <p>I do hope that this API provides the members you’ll need to access directly, while keeping the API as trim as possible too.</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:0767317B-992E-4b12-91E0-4F059A8CECA8:75ccf6f9-c0f3-451f-9a5d-d38461b05a96" class="wlWriterEditableSmartContent">Technorati Tags: <a href="http://technorati.com/tags/RIAServices" rel="tag">RIAServices</a>,<a href="http://technorati.com/tags/DomainDataSource" rel="tag">DomainDataSource</a>,<a href="http://technorati.com/tags/DomainDataSourceView" rel="tag">DomainDataSourceView</a>,<a href="http://technorati.com/tags/Silverlight" rel="tag">Silverlight</a></div>

