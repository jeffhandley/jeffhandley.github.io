---
layout: post
title: "HP MediaSmart Home Server and Photo Sharing"
date: 2008-07-11 01:40:25 -0700
comments: true
tags: ["Windows Home Server", "HP MediaSmart Server", "Photo Sharing"]
redirect_from: ["/archive/2008/07/10/hp-mediasmart-home-server-and-photo-sharing.aspx/"]
author: "Jeff Handley"
---
<!-- more -->
<p>We invested in an <a href="http://www.amazon.com/EX470-MediaSmart-Server-Windows-Drive/dp/B000UY1WSK" target="_blank">HP MediaSmart Server EX470</a>.  This server will become where we store our documents, music, photos, video, and more.  One of the major draws for me was the photo/video sharing website that you get out of the box.  Our family website has been down for months because the “server” (read: old Pentium 2-450 Mhz box with a 20GB HD) has been offline.  So we are really eager to get a family website back online.  Our families are <a href="http://blog.jeffhandley.com/archive/2008/05/12/life.reboot.aspx" target="_blank">missing</a> seeing the boys, so we want to at least show them some pictures!</p>  <p>Besides the hardware problems with the server we were using before, we also decided that we wanted to do something different for the website.  Previously, the site was completely public.  Anyone could jump on the site and view pictures of our family.  We’ve decided that probably isn’t the safest thing to do, so we want a password-protected site where we can invite friends and family members to log in.  Fortunately, the Webshare application that ships with the HP MediaSmart servers works in that manner, so I thought we’d be all set.</p>  <p>Alas, we’re not as equipped as I thought we’d be having that application.  First of all, after I installed the home server, I couldn’t log into the Webshare site.  No matter what I did, it rejected my username/password.  It rejected the account I set up for Kelly too.  No matter what I did, I couldn’t log in.  After googling around, I found that I was not the only one that couldn’t get Webshare to work.  I didn’t see anyone else that could not log in AT ALL, but I found several reports of login-related problems.</p>  <p>One solution I saw someone use was to do a factory-reset on their home server.  Reinstall everything, wiping the data drives.  At a loss for any other options, I went that route.  This required that I pull all of the data back off that I had already moved over there.  This was a 2-night process as I already had many gigs of data moved over.  (Note, moved, not copied).  After reinstalling everything, I was able to get logged into Webshare, but it thought my user account was a visitor, not a manager.  This is what I had previously found reports of.  And when I created Kelly’s account, it didn’t work in Webshare.  What a joke!!</p>  <p>I ended up finding <a href="http://www.wegotserved.co.uk/forums/index.php?showtopic=2387" target="_blank">this topic</a> that gave a solution that involved running the postgreSQL command-line tool and manually correcting the Webshare database.  I thought, “Are you kidding me!?”  This is a brand new server, installed cleanly, with the users set up exactly as the setup guide told me to, and I have to hack at the database manually in order for it to freaking work!  GRRRR!!</p>  <p>Sure enough though, this did the trick: (found from <a href="http://www.mediasmarthome.com/forum/thread/10263/Don-t-have-visitor-notification-tabs-etc-for-webshare/" target="_blank">here</a>, thanks <a href="http://www.mediasmarthome.com/profile/438/" target="_blank">DullingWine</a>!)</p>  <p><code>Do remote desktop to your home server   <br />Get a cmd prompt running  <br />cd c:\Program Files\PostgreSQL\8.2\bin  <br />psql.exe -U postgres  <br />\c sj  <br />select * from users;   <br />You should see yourself in the table - make a note of your userid   <br />The update:  <br />update users set manager='t' where userid=your_id;</code></p>  <p>I was able to insert Kelly’s account that way too, so she’s up and running now as well (she just doesn’t know it yet).</p>  <p>Once I finally got into Webshare, I started poking around.  It looks pretty standard.  Create albums, upload pictures, invite people, blah blah blah.  What I didn’t see that I had expected, was a way to just say, “Show all of the photos and videos that are sitting right here on the server.”  Instead, it wants me to upload all of the pictures – but they’re already on the same machine.  I’m not going to like that one bit.</p>  <p>So here’s my dilemma… do I force myself to use this Webshare thing, even though it doesn’t work the way I want it to (and it seems to barely work anyway)?  Maybe I’ll learn it better and grow to like it.  Or do I create my own website and drop it on the box?  Here are some features of our old website that I’d certainly want to use again:</p>  <ol>   <li>No need to create albums.  It just showed a tree of pictures in the library, organized by year, month, day.  You could view slide shows of months or days.  The photos were discovered by looking at disk to see what files were there.</li>  <li>I built a console application (and some batch files) that allowed us to just plug the memory card from the camera into a USB port, double-click an icon, and it would do the following:</li>  <ol>   <li>Move all files off the memory card an onto local disk</li>  <li>Tell you when this was completed so that you could take the card back and be on your way – it was typically under 5 minutes for a full 1GB card dump</li>  <li>The videos were all copied over to a videos share (but not published online)</li>  <li>The photos were parsed for camera orientation, time and date.  Then the photos were rotated to put them in the correct orientation for screen viewing, and the files were renamed giving them a date/time stamp filename.  Thumbnails were also created.</li>  <li>Thumbnails and rotated/renamed photos were copied over to a photos share as well as to the web server</li>   </ol> </ol>  <p>This process had a very high WAF (<a href="http://www.hanselman.com/blog/iPhoneEverythingThatCouldGoWrongDid.aspx" target="_blank">Wife Acceptance Factor</a>) – just plug it in, click an icon, and it tells you when it’s done.  Maintaining the high WAF is a must.  But there are some changes that I would want from the new website too.</p>  <ol>   <li>Ability to browse photos without having to go through a slide show, but provide the slide show to users too</li>  <li>Ability to either browse all photos or browse by album</li>  <li>Automatically create albums when photos are added; for instance a “Photos added on 7/10/2008” album.</li>  <li>Allow custom albums to be creating using the existing files, with no need to copy/upload files</li>  <li>Allow tag-based albums (might also serve as #4), where photos can be tagged with a list of keywords</li>  <li>Allow a note/description to be entered for a photo</li>  <li>Password protected access</li>  <li>Inclusion of videos, encoded to something other than AVI (which is how the camera records them)</li>  <li>Invitations, notifications, and all of that goodness</li> </ol>  <p>Additionally, I would want the website to run over HTTP (as our old one did) instead of HTTPS (as Webshare does).  I don’t want to mess with SSL certificate warning messages or anything, and I don’t see the point in encrypting the photos and videos as they move over the wire.</p>  <p>If I were to create a new site for us, I’d (of course) build it in Silverlight.  There will be a little bit of friction for our visitors as they’ll have to install Silverlight, but the user experience would be worth it.  Silverlight could allow for a clean inclusion of videos with the photos, so long as I can encode them properly.</p>  <p>I will probably end up creating the site.  I’m thinking about starting an open source project for this, unless someone can point me to an existing one that gets me close.</p>  <p></p>  <p></p>  <p></p>  <p></p>  <p></p>  <p></p>  <p></p>  <p></p>  <p></p>  <p></p>  <p></p>  <p></p>  <p></p>
